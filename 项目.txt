**项目：大学生数学错题智能分析系统 (MathMistakeAI)**

**核心指令：** 请作为全栈AI开发助手，根据以下详尽规格，生成一个完整的、可本地运行的Web应用系统。系统需完全使用Python和现代Web技术栈，集成本地Ollama（Qwen2.5-7B）模型，实现个性化错题分析、智能题目生成与试卷组卷功能。所有代码需包含清晰的注释，指明所应用的AI基础技术。

---

### **第一部分：核心功能需求**

1.  **数据导入**：
    *   首要实现一个`固定格式的文本文件导入`功能。
    *   格式模板为：
        ```
        [题目ID] Q001
        [题目类型] 计算题
        [题目内容] 计算∫(0 to 1) x^2 dx
        [错误过程] 【最好识别用户原封不动的过程，如果不能90%以上的确认识别那么就大概总结，如：使用了xxx基本积分公式，但忘记了上下限】
        [错误答案] 1/3
        [正确答案] 1/3
        [知识点标签] 定积分, 微积分基本定理
        [难度等级] 中等
        ```
    *   提供UI界面，允许用户粘贴或上传符合此模板的`.txt`文件。

2.  **AI错题分析**：
    *   **输入**：用户导入的错题数据（题目、错误过程、错误与正确答案）。
    *   **AI处理**：
        *   识别并提取题目中的数学公式/符号（作为特征）。
        *   分析错误原因（概念错误、计算错误、方法错误）。
        *   生成**分步骤的详细解析**。
        *   提供本题的**"通法"总结**（通用解法）。
        *   如果是特殊题型，生成**特定解题套路或思路**。
    *   **输出**：结构化的分析结果，在界面上清晰展示。

3.  **智能题目生成**：
    *   **用户可配置参数**：
        *   **相似度**：提供选项（如："仅改数字"、"同类型变形"、"混合知识点"）。
        *   **数量**：滑动条或输入框，选择生成1-50题。
        *   **难度**：下拉菜单选择（简单、中等、困难），或由系统根据错题难度自动匹配。
        *   **知识点**：基于错题标签，允许用户勾选要侧重覆盖的知识点。
    *   **AI处理**：根据以上参数和原始错题，生成新的计算题及其标准答案。

4.  **智能组卷与导出**：
    *   **用户可配置**：试卷标题、题量、难度分布、知识点覆盖范围。
    *   **AI处理**：从错题库和生成的题目中，按规则筛选、组合成一份试卷。
    *   **导出**：
        *   生成两个独立的`.docx`文件（试卷 + 答案解析）。
        *   **试卷.docx**：包含页眉（学校/班级信息）、按序排列的题目（LaTeX公式需渲染为美观的数学公式）、页脚。
        *   **答案与解析.docx**：每道题附带**详细解析**、**相关知识点**，并**明确指出该题针对用户哪一道历史错题（错题ID）**，用于强化复习。

---

### **第二部分：AI技术集成与展示要求**

1.  **模型**：使用**Ollama**本地部署**Qwen2.5-7B-Instruct**模型。所有AI功能必须通过调用此本地模型实现。
2.  **必须展示的AI基础技术**（在代码注释中明确标出）：
    *   **自然语言处理（NLP）**：用于题目文本理解、分类和关键信息提取。
    *   **特征工程**：设计并实现从数学题目文本中提取特征（如：公式复杂度、符号密度、操作符类型）。
    *   **提示词工程（Prompt Engineering）**：为不同任务（分析、生成、解释）设计高效、结构化的提示词模板。
    *   **文本生成**：用于生成题目解析、相似题和新题目。
    *   **简单推荐逻辑**：基于错题知识点和难度，推荐相似题目或组卷。
3.  **数据**：准备一个包含约100道高等数学/线性代数计算题的示例数据集（格式符合第一部分要求），用于演示系统功能。

---

### **第三部分：前端界面与用户体验**

1.  **技术栈**：使用 **React + TypeScript + Vite** 构建。UI库使用 **Tailwind CSS**，动画使用 **Framer Motion**，图表使用 **Recharts**，公式渲染使用 **MathJax** 或 **KaTeX**。
2.  **设计原则**：
    *   **清晰简洁**：布局直观，功能分区明确。
    *   **视觉美观**：提供至少2套颜色主题（如"科技蓝"、"深夜模式"），支持一键切换。
    *   **丝滑动画**：页面切换、卡片悬停、数据加载、图表渲染均需有流畅的微动画。
    *   **强可访问性**：确保字体颜色与背景对比度高，字体家族兼容性好。
3.  **核心页面**：
    *   **首页**：系统简介、功能导航大卡片、近期错题统计概览。
    *   **错题管理页**：
        *   以**卡片网格**展示所有错题。
        *   支持搜索和按标签/难度筛选。
        *   点击卡片进入**错题详情页**，该页动态展示题目、错误过程、AI分析结果（错误原因、分步解析、通法）及关联知识点。
    *   **智能生成页**：
        *   左侧为**参数配置面板**（滑动条、下拉菜单、多选框），用于设置生成题目或试卷的参数。
        *   右侧为**实时预览区**，展示生成结果。
    *   **数据统计页**：
        *   使用丰富的图表展示学习数据：**近期错题趋势折线图**、**知识点分布饼图**、**难度分布柱状图**（柱状图需有从底部升起的动画）。
        *   所有图表需美观、可交互。
4.  **图标与动效**：使用清晰的图标系统。为关键交互（如生成题目、分析完成）设计有反馈感的动画。

---

### **第四部分：后端与系统架构**

1.  **技术栈**：使用 **Python** 的 **FastAPI** 框架构建后端。数据存储使用 **CSV文件**（模拟轻量级数据库），无需复杂SQL数据库。
2.  **项目结构**：
    ```
    math-mistake-ai/
    ├── Ver1.0.0/                    # MVP版本：确保基础功能完整可用
    │   ├── backend/
    │   │   ├── main.py              # FastAPI应用入口
    │   │   ├── ai_engine.py         # 封装Ollama模型调用
    │   │   ├── analyzers/           # 错题分析模块
    │   │   ├── generators/          # 题目与试卷生成模块
    │   │   ├── data/                # CSV数据存储与操作模块
    │   │   ├── utils/               # 工具函数（特征提取、LaTeX处理等）
    │   │   ├── prompts/             # 存放所有AI提示词模板
    │   │   └── requirements.txt
    │   └── frontend/                # React前端项目
    │       ├── public/
    │       ├── src/
    │       └── package.json
    ├── sample_data/                 # 示例数据集
    ├── docs/                        # 文档
    └── README.md                    # 项目总说明
    ```
    *注：后续可创建Ver1.1.0（功能更新）或Ver1.0.1（问题修复）文件夹，基于上一版本进行迭代。*
3.  **关键数据结构**（Python Pydantic模型或字典）：
    *   `MistakeItem`: 包含`id`, `question_text`, `user_answer`, `correct_answer`, `knowledge_points`, `ai_analysis`等字段。
    *   `GeneratedQuestion`: 包含`id`, `source_mistake_id`, `question_text`, `solution`, `similarity_level`等字段。
4.  **API接口**：设计清晰的RESTful API供前端调用，例如：`POST /api/analyze`, `POST /api/generate/questions`, `POST /api/generate/paper`。

---

### **第五部分：开发原则与署名要求**

1.  **开发原则**：
    *   **优先实现MVP**：在Ver1.0.0中，首要目标是确保所有核心功能（错题导入、AI分析、题目生成、试卷导出）能够完整运行。界面可以相对简单，但功能逻辑必须完整、可用。
    *   **逐步优化**：在后续版本（如Ver1.1.0）中，再逐步优化UI/UX、增加动画效果、丰富图表类型、完善错误处理等。
    *   **模块化设计**：代码应高度模块化，便于后续版本的迭代和维护。

2.  **署名与信息**：
    *   在项目根目录的`README.md`文件顶部，以及主要源代码文件（如`backend/main.py`和`frontend/src/App.tsx`）的注释头部，加入以下信息：
        ```
        /*
         * 项目：大学生数学错题智能分析系统 (MathMistakeAI)
         * 作者：Rookie
         * GitHub仓库：https://github.com/[YourUsername]/MathMistakeAI
         * 邮箱：your-email@example.com
         * 版本：Ver1.0.0 (MVP)
         * 描述：基于本地AI的个性化错题处理系统
         */
        ```
    *   请在实际生成代码时，将`[YourUsername]`和`your-email@example.com`替换为适当的信息，或保留占位符提示用户自行填写。

---

### **第六部分：提示词工程模板（供后端`ai_engine.py`调用）**

你需要为以下任务设计具体的提示词模板：

1.  **错题分析提示词**：指导模型识别错误类型、分步解析、总结通法。
2.  **相似题目生成提示词**：根据用户选择的"相似度"等级，指导模型生成不同相似程度的题目。
3.  **试卷解析生成提示词**：指导模型为试卷中的每道题生成详细解析，并与特定错题ID关联。

**示例（错题分析）：**
```
你是一个经验丰富的数学导师。请分析以下学生的错题：
【题目】：{question_text}
【学生的错误过程或答案】：{wrong_process}
【正确答案】：{correct_answer}
【涉及知识点】：{knowledge_points}

请按以下结构化格式回复：
1. **错误类型诊断**：[明确是概念不清、计算失误还是方法错误]
2. **逐步正确解析**：[展示完整的解题步骤]
3. **通用解法（通法）**：[总结这类题目的通用思路和步骤]
4. **针对性学习建议**：[基于此错误，给出复习建议]
```

---

**最终指令：** 请基于以上完整、非代码化的需求规格，生成Ver1.0.0（MVP版本）的可执行、模块化项目代码。确保在本地环境（配置好Ollama与Qwen2.5-7B模型）中能够成功运行，并遵循"优先实现功能，逐步优化"的原则。